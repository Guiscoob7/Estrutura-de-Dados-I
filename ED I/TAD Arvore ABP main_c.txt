//main.c

#include <stdio.h>          // Inclui a biblioteca padrÃ£o de entrada e saÃ­da ğŸ“š
#include <stdlib.h>         // Inclui a biblioteca padrÃ£o de utilidades, como alocaÃ§Ã£o de memÃ³ria ğŸ§°
#include <time.h>           // Inclui a biblioteca para manipulaÃ§Ã£o de tempo â°
#include "funcoes.h"        // Inclui o cabeÃ§alho com funÃ§Ãµes e definiÃ§Ãµes personalizadas ğŸ“œ

int main() {
    srand(time(NULL));  // Inicializa a semente para geraÃ§Ã£o de nÃºmeros aleatÃ³rios ğŸŒ±
    int opcao, valor;  // VariÃ¡veis para armazenar a opÃ§Ã£o do usuÃ¡rio e o valor do nÃ³
    Arvore *raiz = NULL;  // Ponteiro inicial da Ã¡rvore binÃ¡ria de sonhos ğŸŒ³

    boasVindas();  // Exibe a mensagem de boas-vindas ğŸ‰

    do {
        exibeMenu();  // Exibe o menu de opÃ§Ãµes ğŸ“‹
        scanf("%d", &opcao);  // LÃª a opÃ§Ã£o escolhida pelo usuÃ¡rio ğŸ†—
        limparbuffer();  // Limpa o buffer de entrada ğŸ§¹
        limpar();  // Limpa a tela ğŸ–¥ï¸

        switch(opcao) {
            case 1:
                valor = gerarNumeroAleatorio(1,100);  // Gera dados de um novo sonho ğŸ²
                raiz = inserirNo(raiz, valor);  // Insere o sonho na Ã¡rvore ğŸŒ±
                printf(LIME "\nğŸŒ³ Nota inserida na Ã¡rvore binÃ¡ria com sucesso!\n" RESET);  // ConfirmaÃ§Ã£o de inserÃ§Ã£o âœ”ï¸
                limpar();  // Limpa a tela ğŸ–¥ï¸
                break;

            case 2:
                printf(LIME "ğŸ” Exibindo a Ã¡rvore de notas (Olhe na horizontal, raiz base <- esquerda / aprofundamento -> direita)...\n" RESET);  // Mensagem de exibiÃ§Ã£o da Ã¡rvore ğŸŒ³
                limpar();
                exibirArvore(raiz, 0);  // FunÃ§Ã£o para exibir a Ã¡rvore ğŸ“Š
                limpar();  // Limpa a tela ğŸ–¥ï¸
                break;

            case 3:
                printf(LIME "ğŸ” Consultando a nota na Ã¡rvore...\n" RESET);  // Mensagem de consulta ğŸ”
                limpar();
                printf(PURPLE "ğŸ”¢ Digite o valor da nota a ser buscado: " RESET);  // Solicita ao usuÃ¡rio o valor a ser buscado
                scanf("%d", &valor);  // LÃª o valor a ser buscado ğŸ†—
                limparbuffer();
                int encontrado = -1;  // Inicializa a variÃ¡vel de controle de busca
                encontrado = buscarNo(raiz, valor);  // Busca o nÃ³ pelo valor
                limpar();  // Limpa a tela ğŸ–¥ï¸
                break;

            case 4:
                printf(ORANGE "ğŸ“‹ Digite o valor da nota a ser removida: " RESET);  // Solicita ao usuÃ¡rio o valor a ser removido
                scanf("%d", &valor);  // LÃª o valor a ser removido ğŸ†—
                limparbuffer();
                encontrado = -1;  // Reseta a variÃ¡vel de controle de busca
                raiz = removerNo(raiz, valor);  // Remove o nÃ³ da Ã¡rvore ğŸ—‘ï¸
                limpar();  // Limpa a tela ğŸ–¥ï¸
                break;

            case 5:
                printf(CYAN "ğŸ“Š Contando o nÃºmero total de nÃ³s na Ã¡rvore...\n" RESET);  // Nova mensagem de contagem de nÃ³s
                limpar();  // Limpa a tela ğŸ”„
                printf(CYAN "ğŸŒ² Total de NÃ³s na Ãrvore: %d\n" RESET, contagemNos(raiz));
                limpar();  // Limpa a tela ğŸ”„ novamente
                break;

            case 6:
                printf(CYAN "ğŸ”¢ Contando o nÃºmero de folhas e nÃ³s nÃ£o-folha na Ã¡rvore...\n" RESET);  // Nova mensagem de contagem
                limpar();  // Limpa a tela ğŸ”„
                
                int qtdFolhas = 0;  // VariÃ¡vel para armazenar a quantidade de folhas
                int qtdNaoFolhas = contagemFolhasNaoFolhas(raiz, &qtdFolhas);  // Chama a funÃ§Ã£o e passa o endereÃ§o de qtdFolhas
                
                printf(CYAN "ğŸƒ Total de Folhas: %d\n" RESET, qtdFolhas);  // Exibe o nÃºmero de folhas
                printf(CYAN "ğŸŒ¿ Total de Galhos (NÃ³s NÃ£o-Folhas): %d\n" RESET, qtdNaoFolhas);  // Exibe o nÃºmero de nÃ³s nÃ£o-folhas
                
                limpar();  // Limpa a tela ğŸ”„ novamente
                break;

            case 7:
                printf(YELLOW "ğŸŒ² Calculando a altura da Ã¡rvore...\n" RESET);
                limpar(); // Limpa a tela, se a funÃ§Ã£o estiver definida
                int altura = alturaArvore(raiz);
                if (altura != -1) { // Verifica se a Ã¡rvore nÃ£o estÃ¡ vazia
                    printf(PURPLE "ğŸ“ A altura da Ã¡rvore Ã©: %d ğŸŒ¿\n" RESET, altura);
                } else {
                    printf(RED "ğŸŒ¸ A Ã¡rvore estÃ¡ vazia! ğŸŒ¸\n" RESET);
                }
                limpar();
                break;

            case 8:
                printf(YELLOW "ğŸŒ³ğŸŒŸ Calculando a maior nota da Ã¡rvore...\n" RESET);
                limpar(); // Limpa a tela, se a funÃ§Ã£o estiver definida
                int maior = maiorArvore(raiz);
                if (maior != -1) { // Verifica se a Ã¡rvore nÃ£o estÃ¡ vazia
                    printf(PURPLE "âœ¨ A maior nota na Ã¡rvore Ã©: %d ğŸŒ¿\n" RESET, maior);
                } else {
                    printf(RED "ğŸŒ¸ A Ã¡rvore estÃ¡ vazia! ğŸŒ¸\n" RESET);
                }
                limpar();
                break;

            case 9:
                printf(CYAN "ğŸª Espelhando a Ã¡rvore...\n" RESET);  // Usando o emoji de espelho
                limpar();
                espelhoArvore(raiz);
                printf(GREEN "ğŸŒŸ A Ã¡rvore foi espelhada com sucesso!\n" RESET);  // Mantendo o emoji de estrela
                limpar();  // Limpa a tela, se a funÃ§Ã£o estiver definida
                break;
            
            case 10:
                printf(LIME "ğŸŒ³ Encerrando o programa e liberando a memÃ³ria da Ã¡rvore...\n" RESET);  // Mensagem de encerramento ğŸŒ±
                liberarArvore(raiz);  // Libera a memÃ³ria da Ã¡rvore ğŸ—‘ï¸
                printf(LIME "ğŸŒ¿ MemÃ³ria liberada com sucesso!\n" RESET);  // ConfirmaÃ§Ã£o de liberaÃ§Ã£o de memÃ³ria âœ”ï¸
                limpar();  // Limpa a tela ğŸ–¥ï¸
                break;
            
            default:
                printf(RED "âš ï¸ OpÃ§Ã£o invÃ¡lida!\n" RESET);  // Mensagem de erro para opÃ§Ã£o invÃ¡lida âŒ
                limpar();  // Limpa a tela ğŸ–¥ï¸
                break;
        }
    } while (opcao != 10);  // Continua o loop atÃ© que o usuÃ¡rio escolha encerrar
    
    return 0;  // Finaliza o programa com sucesso ğŸ‰
}
